<div class="item-new extended"><!-- collapsed/extended -->
    <form (ngSubmit)="onItemSubmit()">
        <div class="item-new-embeded-content loading-content" *ngIf="urlEntry && loadingContent">
            Loading...
        </div>
        <div class="item-new-embeded-content loading-content" *ngIf="urlEntry && !loadingContent && !validUrl">
            Invalid Url
        </div>
        <div class="item-new-embeded-content" *ngIf="!loadingContent && item._content && validUrl">
            <span class="item-new-preview">How it's gonna looks like</span>
            <iv-item-url *ngIf="item.type == itemTypes.URL" [itemUrl]=item._content ></iv-item-url>
            <iv-item-image *ngIf="item.type == itemTypes.IMAGE" [itemImage]=item._content ></iv-item-image>
            <iv-item-tweet *ngIf="item.type == itemTypes.TWEET" [itemTweet]=item._content [class.collapse]="!tweetRendered"></iv-item-tweet>
            <iv-item-youtube *ngIf="item.type == itemTypes.YOUTUBE" [itemYoutube]=item._content ></iv-item-youtube>
        </div>
        <input class="item-new-url" type="text" placeholder="Enter your url..." [(ngModel)]="urlEntry" (keyup)="onUrlKeyUp()" (keydown)="onUrlKeyDown()" />
        <textarea *ngIf="addDescription" class="item-new-description" placeholder="Add a description here..." rows="1" [(ngModel)]="item.description"></textarea>

        <div class="item-create">
            <div class="btn-group form-action active" [class.active]="addDescription" (click)="addDescription = !addDescription">
                <button class="btn-icon" type="button">
                    <i class="material-icons icon">comment</i>
                </button>
            </div>
            <div *ngIf="validUrl" class="btn-group form-action">
                <button (click)="resetItemContent()" class="btn-icon text-danger" type="button">
                    <i class="material-icons icon">link</i><span>Reset url</span>
                </button>
            </div>

            <input *ngIf="mode == 'CREATE'" class="btn btn-create pull-xs-right" type="submit" value="Add" [disabled]="(!item.description && !item._content) || (urlEntry && !validUrl) || (item._content && item._content.url != urlEntry)"/>

            <input *ngIf="mode == 'UPDATE'" class="btn btn-create pull-xs-right" type="submit" value="Update" [disabled]="(!item.description && !item._content) || (urlEntry && !validUrl) || (item._content && item._content.url != urlEntry)"/>
            <a *ngIf="mode == 'UPDATE'" class="btn btn-create pull-xs-right" (click)="cancelUpdate()">Cancel</a>
        </div>
    </form>
</div>
